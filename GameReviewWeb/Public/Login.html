<!DOCTYPE html>
<html>
	<link rel="stylesheet" href="webstyle.css">
<header>
  <title>
  Task 1 Website
  </title>
</header>
<body>
	<div class="navbar">	
		<a href="Home.html"><img id="logo" src="Assets\grn_logo.png" style="height: 100%; float: left; margin-left: 10px"></a>
		<a href="Login.html" class="navbar_buttons">Login</a></li>
		<a href="Signup.html" class="navbar_buttons">Signup</a></li>
		<div class="search">
			<input type="text" name="search" id="search" placeholder="Search" autocomplete="off">
		</div> 
	</div>
	<br>
	<br>
	<br>
	<div style="height: 100px;"></div>
	<div class="login_box" style="height: 290px;">
		<form class="credentials">
			<input type="text" name="username" id="username" placeholder="Username" autocomplete="off" required>
			<input type="text" name="password" id="password" placeholder="Password" autocomplete="off" required>
			</form> 
			<a style="margin-left: 4%; font-size: 11px;" href="https://www.youtube.com/watch?v=oMsNGbk7sgo" target="_blank"> I forgot my password </a>
			<label>
				<input type="checkbox" name="remember" id="remember" style="margin-right: 5%; float: right; margin-top: 3px;">
				<p style="float: right; font-size: 12px; margin-top: 3px; margin-right: 2px;">Remember me</p>
			</label>
			<p style="margin-left: 4%; font-size: 15px; margin-top: 2px; color: red;">Incorrect credentials</p>
			<button type="submit" class="homeButtons" style="margin-top: 50px; cursor: pointer;">
			<div>
				<p style="margin-top: -5px;">Log in</p>
			</div>
		</button>
		
		
		<!-- sign in code (DOESN'T WORK)-->
		<script>
			document.getElementById("credentials").addEventListener("submit", async (e) => {
				e.preventDefault();
				
				const formData = new FormData(e.target);
				const username = formData.get("username");
				const password = formData.get("password");

				try {
					const response = await fetch("/login", {
						method: "POST",
						headers: { "Content-Type": "application/json" },
						body: JSON.stringify({ username, password })
					});
					const data = await response.json();

					if (response.ok) {
						alert("Login successful!");
						window.location.href = "/home"; // Redirect to homepage or dashboard
					} else {
						document.getElementById("loginMessage").innerText = data;
					}
				} catch (err) {
					console.error(err);
				}
			});
		</script>
	</div>
	<p style="text-align: center; margin-left: auto; margin-right: auto; width: 50%; color: red; font-size: 64px; background-color: rgba(100,100,100, .75);">something about the<br>event listener is<br>breaking the<br>code</p>
</body>
</html>